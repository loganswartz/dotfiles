#!/bin/bash


# === general =================================================================
clone () {
	# clone github repo in the 'user/repo' format instead of needing to write out the entire Github URL
	# aka 'git clone https://github.com/loganswartz/dotfiles' becomes 'clone loganswartz/dotfiles'
	git clone "https://github.com/$1"
}

mediadiff () {
	nvim -d <(mediainfo "$1") <(mediainfo "$2")
}

prettyjson () {
	cat "$1" | python3 -m json.tool | sponge "$1"
}

alias lh='ls -lah'

# alias 'apt list --upgradable' to 'apt updates'
alias apt='apt '
alias updates='list --upgradable'
if ! command -v nvim &> /dev/null; then
  echo "Neovim is not installed, falling back to vim."
  alias nvim='vim '
fi

# === typos ===================================================================
alias cs='cd '


# === laptop-specific =========================================================
alias citra='flatpak run org.citra.citra-canary &'
alias while-slack-term='while [[ true ]]; do slack-term; done'

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

standalone () {
	# launch programs from commandline without mucking up your current pty
	# usage: "standalone <your full command>"
	"$@" > /dev/null 2>&1 &
}


# === WSL-specific ============================================================
alias open='cmd.exe /C start'
alias notes='nvim "/mnt/c/Users/Logan Swartzendruber/Desktop/Notes/"'


# === programming =============================================================
alias lint='watch python3 -m flake8 --count --ignore=W391,W503 --max-complexity=10 --max-line-length=127 --statistics'
alias gitdu="
	git rev-list --objects --all \
	| git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' \
	| sed -n 's/^blob //p' \
	| sort --numeric-sort --key=2 \
	| cut -c 1-12,41- \
	| $(command -v gnumfmt || echo numfmt) --field=2 --to=iec-i --suffix=B --padding=7 --round=nearest
"
